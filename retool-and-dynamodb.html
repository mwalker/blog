<!doctype html>
<html lang="en-AU">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Further Notes… on Retool and DynamoDB</title>
<meta name="description" content="" />
<!-- link rel="stylesheet" href="https://cdn.simplecss.org/simple.css" -->
<link rel="stylesheet" href="/assets/css/style.css">

<link rel="icon" href="/assets/images/favicon.png" />
<link rel="apple-touch-icon" href="/assets/images/favicon.png">

<link rel="canonical" href="/retool-and-dynamodb">
<link rel="alternate" type="application/rss+xml" title="Further Notes…" href="/feed.xml">
  </head>
  <body>

    <header>
      <nav>
  <a href="/">Further Notes…</a>
  
  <a href="/tags" >tags</a>
  
  <a href="https://pinboard.in/u:gunzel" >links</a>
  
  <a href="https://www.librarything.com/profile/gunzel" >library</a>
  
  <a href="https://github.com/mwalker" >code</a>
  
  <a href="/feed.xml" >rss</a>
  
</nav>

      <h1>Retool and DynamoDB</h1>
    </header>

    <main>

      <p class="meta">Posted on 10 Sep 2022</p>

<p>If you’re trying to set up a DynamoDB query in <a href="https://retool.com/">Retool</a> and you get the error <code class="language-plaintext highlighter-rouge">"One or more parameter values were invalid: Condition parameter type does not match schema type"</code> then is probably because you are using the syntax:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ ":kind": {"S": "timesheet" } }
</code></pre></div></div>

<p>in your expression attribute value, it seems underneath that Retool use the “DocumentClient” interface, that will infer the type of the value, so you specify your value like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ ":kind": "timesheet" }
</code></pre></div></div>

<p>After getting that going then I discovered the visual parameter editor did not have a way to specify <code class="language-plaintext highlighter-rouge">ScanIndexForward</code> which I needed to to set to false to get the descending order sort I needed by date. There is a workaround for this, but you have to then use the JSON editor (which confusingly is selected by a checkbox that will stay on but then be labelled “Use visual parameter editor”). In my earlier debugging I had recreated my query in the AWS cli, so I was able to sue this with the <code class="language-plaintext highlighter-rouge">--debug</code> flag to dig the appropriate JSON out of the log (grep for “Making request for OperationModel” in stderr). I did have to translate back the expression attribute value as above however.</p>

<p>I can’t wait for Retool to have an easily accessible local SQL database for simple jobs like what I am working on.</p>

<p>So I can find it later a full query in JSON format might look like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "TableName": "&lt;tablename&gt;",
  "IndexName": "&lt;indexname&gt;",
  "ScanIndexForward": false,
  "KeyConditionExpression": "kind = :kind",
  "ExpressionAttributeValues": {
    ":kind":"timesheet"
  }
}
</code></pre></div></div>



<hr />

<p class="meta"><a href="/tag/low-code/">#low-code</a> <a href="/tag/no-sql/">#no-sql</a> <a href="/tag/dynamodb/">#DynamoDB</a> <a href="/tag/retool/">#retool</a> </p>


    </main>

    <footer>
      <p>Copyright © 1990-2024 Matthew Walker.</p>
    </footer>

  </body>
</html>
